<!DOCTYPE html>
<html lang="pt-PT" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>As minhas Consultas</title>
    <link rel="stylesheet" href="/css/styles.css" /> <!-- Opcional -->
</head>
<body>

    <h1>As minhas Consultas</h1>

    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Data e Hora</th>
                <th>Médico</th>
                <th>Descrição</th>
                <th>Status</th>
            </tr>
        </thead>
<tr th:each="consulta : ${consultas}">
    <td class="data-hora" th:text="${consulta.horarioDisponivel.dataHoraInicio}"></td>
    <td th:text="${consulta.horarioDisponivel?.medico?.nome}"></td>
    <td th:text="${consulta.descricao}"></td>
    <td th:text="${consulta.status}"></td>
</tr>

    </table>

</body>
</html>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const formatarDataHora = (isoString) => {
        const data = new Date(isoString);
        if (isNaN(data.getTime())) return isoString;

        const dia = String(data.getDate()).padStart(2, '0');
        const mes = String(data.getMonth() + 1).padStart(2, '0');
        const ano = data.getFullYear();

        const horas = String(data.getHours()).padStart(2, '0');
        const minutos = String(data.getMinutes()).padStart(2, '0');

        return `${dia}/${mes}/${ano} ${horas}:${minutos}`;
    };

    const elementos = document.querySelectorAll('.data-hora');
    elementos.forEach(el => {
        const original = el.textContent.trim();
        el.textContent = formatarDataHora(original);
    });
});
</script>
